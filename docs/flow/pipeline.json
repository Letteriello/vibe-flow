{
  "pipeline_id": "flow-20260227-quality-gates",
  "created_at": "2026-02-27T16:00:00.000Z",
  "objective": "Quality Gates (OWASP) e Integração de Execução Determinística (Agentic-Map) - Integrar src/security e src/quality ao state-machine para criar Quality Gates determinísticos no Ralph loop, bloqueando commits que falhem no scanner OWASP. Em paralelo, implementar estrutura Agentic-Map baseada em LCM para isolamento de contexto em execuções paralelas.",
  "current_phase": "plan",
  "status": "in_progress",
  "previous_pipeline": "flow-20260228-memory-init",
  "previous_status": "complete",
  "phases": {
    "analyze": {
      "status": "done",
      "work_units": [
        {
          "id": "ANA-001",
          "scope": "security-modules",
          "description": "Analisar módulos de segurança existentes (src/security/)",
          "work_status": "done",
          "worker": "worker-resume",
          "output": "docs/flow/analyze/security.md"
        },
        {
          "id": "ANA-002",
          "scope": "quality-modules",
          "description": "Analisar módulos de qualidade existentes (src/quality/)",
          "work_status": "done",
          "worker": "worker-resume",
          "output": "docs/flow/analyze/quality-modules.md"
        },
        {
          "id": "ANA-003",
          "scope": "state-machine",
          "description": "Analisar state-machine atual e quality-gate.ts existente",
          "work_status": "done",
          "worker": "worker-resume",
          "output": "docs/flow/analyze/state-machine.md"
        },
        {
          "id": "ANA-004",
          "scope": "mcp-tools",
          "description": "Analisar ferramentas MCP existentes",
          "work_status": "done",
          "worker": "worker-resume",
          "output": "docs/flow/analyze/mcp-tools.md"
        },
        {
          "id": "ANA-005",
          "scope": "ralph-loop",
          "description": "Analisar loop Ralph e sistema wrap-up",
          "work_status": "done",
          "worker": "worker-resume",
          "output": "docs/flow/analyze/ralph-loop.md"
        }
      ],
      "merge_status": "done"
    },
    "plan": {
      "status": "in_progress",
      "work_units": [
        {
          "id": "PLAN-PRD-001",
          "scope": "quality-gates-owasp",
          "feature": "FEAT-001",
          "description": "Gerar PRD para Quality Gates com OWASP scanning",
          "work_status": "pending",
          "worker": null,
          "output": null,
          "dependencies": ["docs/flow/analyze/_merged.md"]
        },
        {
          "id": "PLAN-PRD-002",
          "scope": "agentic-map",
          "feature": "FEAT-002",
          "description": "Gerar PRD para Agentic-Map baseado em LCM",
          "work_status": "pending",
          "worker": null,
          "output": null,
          "dependencies": ["docs/flow/analyze/_merged.md"]
        },
        {
          "id": "PLAN-PRD-003",
          "scope": "qa-report-generation",
          "feature": "FEAT-003",
          "description": "Gerar PRD para geração automatizada de qa-report.md",
          "work_status": "pending",
          "worker": null,
          "output": null,
          "dependencies": ["docs/flow/analyze/_merged.md"]
        },
        {
          "id": "PLAN-UX-001",
          "scope": "quality-gates-owasp",
          "feature": "FEAT-001",
          "description": "Gerar UX Spec para Quality Gates",
          "work_status": "pending",
          "worker": null,
          "output": null,
          "dependencies": ["PLAN-PRD-001"]
        },
        {
          "id": "PLAN-UX-002",
          "scope": "agentic-map",
          "feature": "FEAT-002",
          "description": "Gerar UX Spec para Agentic-Map",
          "work_status": "pending",
          "worker": null,
          "output": null,
          "dependencies": ["PLAN-PRD-002"]
        },
        {
          "id": "PLAN-UX-003",
          "scope": "qa-report-generation",
          "feature": "FEAT-003",
          "description": "Gerar UX Spec para qa-report",
          "work_status": "pending",
          "worker": null,
          "output": null,
          "dependencies": ["PLAN-PRD-003"]
        },
        {
          "id": "PLAN-TASKS-001",
          "scope": "quality-gates-owasp",
          "feature": "FEAT-001",
          "description": "Decompor tasks para Quality Gates",
          "work_status": "pending",
          "worker": null,
          "output": null,
          "dependencies": ["PLAN-PRD-001", "PLAN-UX-001"]
        },
        {
          "id": "PLAN-TASKS-002",
          "scope": "agentic-map",
          "feature": "FEAT-002",
          "description": "Decompor tasks para Agentic-Map",
          "work_status": "pending",
          "worker": null,
          "output": null,
          "dependencies": ["PLAN-PRD-002", "PLAN-UX-002"]
        },
        {
          "id": "PLAN-TASKS-003",
          "scope": "qa-report-generation",
          "feature": "FEAT-003",
          "description": "Decompor tasks para qa-report",
          "work_status": "pending",
          "worker": null,
          "output": null,
          "dependencies": ["PLAN-PRD-003", "PLAN-UX-003"]
        }
      ],
      "merge_status": "waiting"
    },
    "dev": {
      "status": "blocked_by:plan",
      "work_units": [],
      "merge_status": "waiting"
    },
    "qa": {
      "status": "blocked_by:dev",
      "work_units": [],
      "merge_status": "waiting"
    }
  },
  "workers": {},
  "circuit_breakers": {},
  "config": {
    "max_retries_per_unit": 3,
    "heartbeat_timeout_minutes": 30,
    "auto_advance_phases": true
  },
  "features": [
    {
      "id": "FEAT-001",
      "name": "Bloqueio via Quality Gates (OWASP)",
      "description": "Integrar src/security ao state-machine para criar Quality Gates que bloqueiem commits que falhem no scanner OWASP",
      "justificativa": "Código da IA frequentemente falha em segurança; aplicar src/security/ antes de cada commit no loop Ralph impede vulnerabilidades"
    },
    {
      "id": "FEAT-002",
      "name": "Implementação da Tool Agentic-Map",
      "description": "Criar estrutura baseada em LCM para gerenciar execuções de sub-tarefas em sessões isoladas",
      "justificativa": "Paper LCM propõe que recursão simbólica é perigosa; Agentic-Map gerencia iteração e isolamento de contexto"
    },
    {
      "id": "FEAT-003",
      "name": "Geração Automatizada de qa-report.md",
      "description": "Consolidar achados de segurança em reporte de qualidade unificado via wrap-up",
      "justificativa": "Comunidade r/ClaudeCode reforça que wrap-up deve consolidar QA em reporte unificado"
    }
  ]
}
