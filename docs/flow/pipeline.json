{
  "pipeline_id": "flow-20260227-quality-gates",
  "created_at": "2026-02-27T16:00:00.000Z",
  "objective": "Quality Gates (OWASP) e Integração de Execução Determinística (Agentic-Map) - Integrar src/security e src/quality ao state-machine para criar Quality Gates determinísticos no Ralph loop, bloqueando commits que falhem no scanner OWASP. Em paralelo, implementar estrutura Agentic-Map baseada em LCM para isolamento de contexto em execuções paralelas.",
  "current_phase": "dev",
  "status": "in_progress",
  "previous_pipeline": "flow-20260228-memory-init",
  "previous_status": "complete",
  "phases": {
    "analyze": {
      "status": "done",
      "work_units": [
        {
          "id": "ANA-001",
          "scope": "security-modules",
          "description": "Analisar módulos de segurança existentes (src/security/)",
          "work_status": "done",
          "worker": "worker-resume",
          "output": "docs/flow/analyze/security.md"
        },
        {
          "id": "ANA-002",
          "scope": "quality-modules",
          "description": "Analisar módulos de qualidade existentes (src/quality/)",
          "work_status": "done",
          "worker": "worker-resume",
          "output": "docs/flow/analyze/quality-modules.md"
        },
        {
          "id": "ANA-003",
          "scope": "state-machine",
          "description": "Analisar state-machine atual e quality-gate.ts existente",
          "work_status": "done",
          "worker": "worker-resume",
          "output": "docs/flow/analyze/state-machine.md"
        },
        {
          "id": "ANA-004",
          "scope": "mcp-tools",
          "description": "Analisar ferramentas MCP existentes",
          "work_status": "done",
          "worker": "worker-resume",
          "output": "docs/flow/analyze/mcp-tools.md"
        },
        {
          "id": "ANA-005",
          "scope": "ralph-loop",
          "description": "Analisar loop Ralph e sistema wrap-up",
          "work_status": "done",
          "worker": "worker-resume",
          "output": "docs/flow/analyze/ralph-loop.md"
        }
      ],
      "merge_status": "done"
    },
    "plan": {
      "status": "done",
      "work_units": [
        {
          "id": "PLAN-PRD-001",
          "scope": "quality-gates-owasp",
          "feature": "FEAT-001",
          "description": "Gerar PRD para Quality Gates com OWASP scanning",
          "work_status": "done",
          "worker": "worker-current",
          "output": "contracts: security-types.ts, security-gate.json"
        },
        {
          "id": "PLAN-PRD-002",
          "scope": "agentic-map",
          "feature": "FEAT-002",
          "description": "Gerar PRD para Agentic-Map baseado em LCM",
          "work_status": "done",
          "worker": "worker-current",
          "output": "contracts: agentic-map/types.ts, test-specs"
        },
        {
          "id": "PLAN-PRD-003",
          "scope": "qa-report-generation",
          "feature": "FEAT-003",
          "description": "Gerar PRD para geração automatizada de qa-report.md",
          "work_status": "done",
          "worker": "worker-current",
          "output": "contracts: qa-report/types.ts, mocks.ts"
        },
        {
          "id": "PLAN-UX-001",
          "scope": "quality-gates-owasp",
          "feature": "FEAT-001",
          "description": "Gerar UX Spec para Quality Gates",
          "work_status": "done",
          "worker": "worker-current",
          "output": null
        },
        {
          "id": "PLAN-UX-002",
          "scope": "agentic-map",
          "feature": "FEAT-002",
          "description": "Gerar UX Spec para Agentic-Map",
          "work_status": "done",
          "worker": "worker-current",
          "output": null
        },
        {
          "id": "PLAN-UX-003",
          "scope": "qa-report-generation",
          "feature": "FEAT-003",
          "description": "Gerar UX Spec para qa-report",
          "work_status": "done",
          "worker": "worker-current",
          "output": null
        },
        {
          "id": "PLAN-TASKS-001",
          "scope": "quality-gates-owasp",
          "feature": "FEAT-001",
          "description": "Decompor tasks para Quality Gates",
          "work_status": "done",
          "worker": "worker-current",
          "output": null
        },
        {
          "id": "PLAN-TASKS-002",
          "scope": "agentic-map",
          "feature": "FEAT-002",
          "description": "Decompor tasks para Agentic-Map",
          "work_status": "done",
          "worker": "worker-current",
          "output": null
        },
        {
          "id": "PLAN-TASKS-003",
          "scope": "qa-report-generation",
          "feature": "FEAT-003",
          "description": "Decompor tasks para qa-report",
          "work_status": "done",
          "worker": "worker-current",
          "output": null
        }
      ],
      "merge_status": "done"
    },
    "dev": {
      "status": "in_progress",
      "work_units": [
        {"id": "DEV-OWASP-B-100", "scope": "FEAT-001", "task": "Implementar SecurityGuard (security-guard.ts)", "work_status": "done", "worker": "worker-current", "output": "src/state-machine/security-guard.ts", "dependencies": []},
        {"id": "DEV-OWASP-B-101", "scope": "FEAT-001", "task": "Integrar QualityGate ao state-machine", "work_status": "done", "worker": "worker-current", "output": "src/state-machine/quality-gate.ts", "dependencies": ["DEV-OWASP-B-100"]},
        {"id": "DEV-OWASP-C-200", "scope": "FEAT-001", "task": "Export index.ts (state-machine)", "work_status": "done", "worker": "worker-current", "output": "src/state-machine/index.ts", "dependencies": ["DEV-OWASP-B-101"]},
        {"id": "DEV-OWASP-C-201", "scope": "FEAT-001", "task": "Unit tests security-guard", "work_status": "done", "worker": "worker-current", "output": "tests/", "dependencies": ["DEV-OWASP-B-100"]},
        {"id": "DEV-OWASP-C-202", "scope": "FEAT-001", "task": "Build validation", "work_status": "done", "worker": "worker-current", "output": "build passed", "dependencies": ["DEV-OWASP-C-200", "DEV-OWASP-C-201"]},
        {"id": "DEV-AM-100", "scope": "FEAT-002", "task": "Implementar AgenticMapCore (core.ts)", "work_status": "done", "worker": "worker-current", "output": "src/context/agentic-map/core.ts", "dependencies": []},
        {"id": "DEV-AM-101", "scope": "FEAT-002", "task": "Implementar ContextIsolation", "work_status": "done", "worker": "worker-current", "output": "src/context/agentic-map/context.ts", "dependencies": []},
        {"id": "DEV-AM-102", "scope": "FEAT-002", "task": "Implementar Executor", "work_status": "done", "worker": "worker-current", "output": "src/context/agentic-map/executor.ts", "dependencies": ["DEV-AM-100", "DEV-AM-101"]},
        {"id": "DEV-AM-103", "scope": "FEAT-002", "task": "Implementar MCP Exposure", "work_status": "done", "worker": "worker-current", "output": "src/mcp/agentic-map.ts", "dependencies": ["DEV-AM-100"]},
        {"id": "DEV-AM-104", "scope": "FEAT-002", "task": "Implementar Rollback", "work_status": "done", "worker": "worker-current", "output": "src/context/agentic-map/executor.ts (rollback methods)", "dependencies": ["DEV-AM-102"]},
        {"id": "DEV-AM-INT-001", "scope": "FEAT-002", "task": "Worker Pool connect", "work_status": "done", "worker": "worker-parallel-1", "output": "src/context/worker-pool.ts", "dependencies": ["DEV-AM-102"]},
        {"id": "DEV-AM-INT-002", "scope": "FEAT-002", "task": "Barrel exports (index.ts)", "work_status": "done", "worker": "worker-current", "output": "src/context/agentic-map/index.ts", "dependencies": ["DEV-AM-100", "DEV-AM-101"]},
        {"id": "DEV-AM-INT-003", "scope": "FEAT-002", "task": "Integration tests", "work_status": "done", "worker": "worker-current", "output": "tests/integration/", "dependencies": ["DEV-AM-INT-001", "DEV-AM-INT-002"]},
        {"id": "DEV-AM-INT-004", "scope": "FEAT-002", "task": "Build validation", "work_status": "done", "worker": "worker-current", "output": "build passed", "dependencies": ["DEV-AM-INT-003"]},
        {"id": "DEV-QA-100", "scope": "FEAT-003", "task": "Implementar QAReportGenerator", "work_status": "done", "worker": "worker-Skynet-756-1772202922", "output": "src/qa/reporter/", "dependencies": []},
        {"id": "DEV-QA-101", "scope": "FEAT-003", "task": "Implementar TestCollector", "work_status": "done", "worker": "worker-parallel-2", "output": "src/qa/reporter/collectors/test-collector.ts", "dependencies": []},
        {"id": "DEV-QA-102", "scope": "FEAT-003", "task": "Implementar BuildCollector", "work_status": "done", "worker": "worker-parallel-3", "output": "src/qa/reporter/collectors/build-collector.ts", "dependencies": []},
        {"id": "DEV-QA-103", "scope": "FEAT-003", "task": "Implementar TypesCollector", "work_status": "done", "worker": "worker-parallel-4", "output": "src/qa/reporter/collectors/type-collector.ts", "dependencies": []},
        {"id": "DEV-QA-104", "scope": "FEAT-003", "task": "Implementar SecurityCollector", "work_status": "done", "worker": "worker-Skynet-756-1772202922", "output": "src/qa/reporter/collectors/security-collector.ts", "dependencies": []},
        {"id": "DEV-QA-105", "scope": "FEAT-003", "task": "Implementar CoverageCollector", "work_status": "done", "worker": "worker-current", "output": "src/qa/reporter/collectors/coverage-collector.ts", "dependencies": []},
        {"id": "DEV-QA-106", "scope": "FEAT-003", "task": "Implementar ReportFormatter", "work_status": "done", "worker": "worker-current", "output": "src/qa/reporter/template.ts", "dependencies": []},
        {"id": "DEV-QA-INT-001", "scope": "FEAT-003", "task": "WrapUp integration", "work_status": "done", "worker": "worker-Skynet-756-1772202922", "output": "src/qa/wrapup-integration.ts", "dependencies": ["DEV-QA-100"]},
        {"id": "DEV-QA-INT-002", "scope": "FEAT-003", "task": "CLI commands", "work_status": "done", "worker": "worker-current", "output": "src/cli.ts (qa command)", "dependencies": ["DEV-QA-100"]},
        {"id": "DEV-QA-INT-003", "scope": "FEAT-003", "task": "Configuration", "work_status": "done", "worker": "worker-current", "output": "src/qa/reporter/types.ts (QAReportConfig)", "dependencies": ["DEV-QA-100"]}
      ],
      "merge_status": "waiting"
    },
    "qa": {
      "status": "blocked_by:dev",
      "work_units": [],
      "merge_status": "waiting"
    }
  },
  "workers": {},
  "circuit_breakers": {},
  "config": {
    "max_retries_per_unit": 3,
    "heartbeat_timeout_minutes": 30,
    "auto_advance_phases": true
  },
  "features": [
    {
      "id": "FEAT-001",
      "name": "Bloqueio via Quality Gates (OWASP)",
      "description": "Integrar src/security ao state-machine para criar Quality Gates que bloqueiem commits que falhem no scanner OWASP",
      "justificativa": "Código da IA frequentemente falha em segurança; aplicar src/security/ antes de cada commit no loop Ralph impede vulnerabilidades"
    },
    {
      "id": "FEAT-002",
      "name": "Implementação da Tool Agentic-Map",
      "description": "Criar estrutura baseada em LCM para gerenciar execuções de sub-tarefas em sessões isoladas",
      "justificativa": "Paper LCM propõe que recursão simbólica é perigosa; Agentic-Map gerencia iteração e isolamento de contexto"
    },
    {
      "id": "FEAT-003",
      "name": "Geração Automatizada de qa-report.md",
      "description": "Consolidar achados de segurança em reporte de qualidade unificado via wrap-up",
      "justificativa": "Comunidade r/ClaudeCode reforça que wrap-up deve consolidar QA em reporte unificado"
    }
  ]
}
